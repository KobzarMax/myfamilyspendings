{
  "id": "00000000-0000-0000-0000-000000000000",
  "prevId": "",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.transactions": {
      "name": "transactions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "family_id": {
          "name": "family_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "transaction_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "date": {
          "name": "date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "is_recurring": {
          "name": "is_recurring",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "status": {
          "name": "status",
          "type": "transaction_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'completed'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "transactions_family_id_families_id_fk": {
          "name": "transactions_family_id_families_id_fk",
          "tableFrom": "transactions",
          "tableTo": "families",
          "schemaTo": "public",
          "columnsFrom": [
            "family_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "transactions_user_id_profiles_id_fk": {
          "name": "transactions_user_id_profiles_id_fk",
          "tableFrom": "transactions",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "View family transactions": {
          "name": "View family transactions",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(family_id = ( SELECT profiles.family_id\n   FROM profiles\n  WHERE (profiles.id = auth.uid())))"
        },
        "Insert family transactions": {
          "name": "Insert family transactions",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "Update family transactions": {
          "name": "Update family transactions",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        },
        "Delete family transactions": {
          "name": "Delete family transactions",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.approvals": {
      "name": "approvals",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "proposal_id": {
          "name": "proposal_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "approval_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "approvals_proposal_id_proposals_id_fk": {
          "name": "approvals_proposal_id_proposals_id_fk",
          "tableFrom": "approvals",
          "tableTo": "proposals",
          "schemaTo": "public",
          "columnsFrom": [
            "proposal_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "approvals_user_id_profiles_id_fk": {
          "name": "approvals_user_id_profiles_id_fk",
          "tableFrom": "approvals",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "View family approvals": {
          "name": "View family approvals",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(EXISTS ( SELECT 1\n   FROM proposals\n  WHERE ((proposals.id = approvals.proposal_id) AND (proposals.family_id = ( SELECT profiles.family_id\n           FROM profiles\n          WHERE (profiles.id = auth.uid()))))))"
        },
        "Manage own approvals": {
          "name": "Manage own approvals",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.profiles": {
      "name": "profiles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "full_name": {
          "name": "full_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_url": {
          "name": "avatar_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "family_id": {
          "name": "family_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Update own profile": {
          "name": "Update own profile",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ],
          "using": "(auth.uid() = id)"
        },
        "Insert own profile": {
          "name": "Insert own profile",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "View own profile": {
          "name": "View own profile",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.families": {
      "name": "families",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "families_created_by_profiles_id_fk": {
          "name": "families_created_by_profiles_id_fk",
          "tableFrom": "families",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Enable insert for authenticated users only": {
          "name": "Enable insert for authenticated users only",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "true"
        }
      },
      "isRLSEnabled": true
    },
    "public.bank_accounts": {
      "name": "bank_accounts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "family_id": {
          "name": "family_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "bank_accounts_created_by_profiles_id_fk": {
          "name": "bank_accounts_created_by_profiles_id_fk",
          "tableFrom": "bank_accounts",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "bank_accounts_family_id_families_id_fk": {
          "name": "bank_accounts_family_id_families_id_fk",
          "tableFrom": "bank_accounts",
          "tableTo": "families",
          "schemaTo": "public",
          "columnsFrom": [
            "family_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Users can view their family's bank accounts": {
          "name": "Users can view their family's bank accounts",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(EXISTS ( SELECT 1\n   FROM profiles\n  WHERE ((profiles.id = auth.uid()) AND (profiles.family_id = bank_accounts.family_id))))"
        },
        "Users can insert bank accounts for their family": {
          "name": "Users can insert bank accounts for their family",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "Users can update their family's bank accounts": {
          "name": "Users can update their family's bank accounts",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        },
        "Users can delete their family's bank accounts": {
          "name": "Users can delete their family's bank accounts",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.subscriptions": {
      "name": "subscriptions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "family_id": {
          "name": "family_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "frequency": {
          "name": "frequency",
          "type": "subscription_frequency",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "next_payment_date": {
          "name": "next_payment_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "bank_account_id": {
          "name": "bank_account_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "subscriptions_bank_account_id_bank_accounts_id_fk": {
          "name": "subscriptions_bank_account_id_bank_accounts_id_fk",
          "tableFrom": "subscriptions",
          "tableTo": "bank_accounts",
          "schemaTo": "public",
          "columnsFrom": [
            "bank_account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "subscriptions_created_by_profiles_id_fk": {
          "name": "subscriptions_created_by_profiles_id_fk",
          "tableFrom": "subscriptions",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "subscriptions_family_id_families_id_fk": {
          "name": "subscriptions_family_id_families_id_fk",
          "tableFrom": "subscriptions",
          "tableTo": "families",
          "schemaTo": "public",
          "columnsFrom": [
            "family_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Users can view their family's subscriptions": {
          "name": "Users can view their family's subscriptions",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(EXISTS ( SELECT 1\n   FROM profiles\n  WHERE ((profiles.id = auth.uid()) AND (profiles.family_id = subscriptions.family_id))))"
        },
        "Users can insert subscriptions for their family": {
          "name": "Users can insert subscriptions for their family",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "Users can update their family's subscriptions": {
          "name": "Users can update their family's subscriptions",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        },
        "Users can delete their family's subscriptions": {
          "name": "Users can delete their family's subscriptions",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.categories": {
      "name": "categories",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "family_id": {
          "name": "family_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "icon": {
          "name": "icon",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "color": {
          "name": "color",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_default": {
          "name": "is_default",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "categories_family_id_fkey": {
          "name": "categories_family_id_fkey",
          "tableFrom": "categories",
          "tableTo": "families",
          "schemaTo": "public",
          "columnsFrom": [
            "family_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "categories_type_check": {
          "name": "categories_type_check",
          "value": "type = ANY (ARRAY['income'::text, 'expense'::text, 'both'::text])"
        }
      },
      "policies": {
        "View family categories": {
          "name": "View family categories",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(family_id = ( SELECT profiles.family_id\n   FROM profiles\n  WHERE (profiles.id = auth.uid())))"
        },
        "Insert family categories": {
          "name": "Insert family categories",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "Update family categories": {
          "name": "Update family categories",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        },
        "Delete family categories": {
          "name": "Delete family categories",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.proposals": {
      "name": "proposals",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "family_id": {
          "name": "family_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "proposer_id": {
          "name": "proposer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "proposal_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "target_date": {
          "name": "target_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "proposal_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "proposals_family_id_families_id_fk": {
          "name": "proposals_family_id_families_id_fk",
          "tableFrom": "proposals",
          "tableTo": "families",
          "schemaTo": "public",
          "columnsFrom": [
            "family_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "proposals_proposer_id_profiles_id_fk": {
          "name": "proposals_proposer_id_profiles_id_fk",
          "tableFrom": "proposals",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "proposer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "View family proposals": {
          "name": "View family proposals",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(family_id = ( SELECT profiles.family_id\n   FROM profiles\n  WHERE (profiles.id = auth.uid())))"
        },
        "Insert family proposals": {
          "name": "Insert family proposals",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "Update family proposals": {
          "name": "Update family proposals",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    }
  },
  "enums": {
    "public.approval_status": {
      "name": "approval_status",
      "values": [
        "approved",
        "rejected"
      ],
      "schema": "public"
    },
    "public.proposal_status": {
      "name": "proposal_status",
      "values": [
        "pending",
        "approved",
        "rejected"
      ],
      "schema": "public"
    },
    "public.proposal_type": {
      "name": "proposal_type",
      "values": [
        "spending",
        "savings"
      ],
      "schema": "public"
    },
    "public.subscription_frequency": {
      "name": "subscription_frequency",
      "values": [
        "weekly",
        "monthly",
        "yearly"
      ],
      "schema": "public"
    },
    "public.transaction_status": {
      "name": "transaction_status",
      "values": [
        "planned",
        "completed"
      ],
      "schema": "public"
    },
    "public.transaction_type": {
      "name": "transaction_type",
      "values": [
        "income",
        "expense"
      ],
      "schema": "public"
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "tables": {}
  }
}